<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" href=https://sepi.me/css/base.css>

  <title>sepi.me</title>
</head>

<body>
  <section class="section">
    <div class="container">
      

<div class="home-title">
  ﴾SEPI﴿
</div>

<div class="home-links">
  <a class="home-link" href="/"> Home </a>
  .
  <a class="home-link" href="https://x.com/sepisoad"> Twitter </a>
  .
  <a class="home-link" href="https://github.com/sepisoad"> Github </a>
  .
  <a class="home-link" href="https://sr.ht/~sepisoad"> SourceHut </a>
</div>

<div class="post-section">

<h1 class="post-title"> how to run deno in watch mode </h1>

2022-08-26

<div class="post-content">
<p><a href="https://deno.land">deno</a> is awesome in many ways, you can setup a project that makes use of external libaries in a matter of seconds, you do not need the stupid <code>package.json</code> file and also you do not need to install countless libraries just to run a hello world http server.</p>
<p>deno has a really nice and consistent cli interface and you can quickly learn how to get it do what you want simply by following the cli help parameters. also the documentations is really neat.</p>
<p>deno comes with a <a href="https://deno.land/manual@v1.25.0/tools/repl">REPL</a> which is OK, speciallt if you compare to <code>node.js</code>, however there are rooms for improvements, like for example after you are dropped into the repl there is no way for you to reload an already loaded module. I mean compared to lisps the REPL that comes with deno leaves a lot to be desired.</p>
<p>but there are always some workaround, so for now what you can do is to run the deno in watch mode and have it watch the entry file or basically any file you desire and then put some <code>console.log</code>s around to see the changes in live.</p>
<p>for example here is a simple setup:</p>
<pre style="background-color:#eff1f5;color:#4f5b66;"><code><span>├ app.js
</span><span>└ module-a.js
</span></code></pre>
<pre data-lang="js" style="background-color:#eff1f5;color:#4f5b66;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#a7adba;">//app.js
</span><span style="color:#b48ead;">import </span><span style="color:#d08770;">* </span><span style="color:#b48ead;">as </span><span style="color:#bf616a;">M </span><span style="color:#b48ead;">from </span><span>&quot;</span><span style="color:#a3be8c;">./module-a.js</span><span>&quot;
</span><span>
</span><span style="color:#d08770;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">M</span><span>.</span><span style="color:#96b5b4;">add</span><span>(</span><span style="color:#d08770;">2</span><span>, </span><span style="color:#d08770;">3</span><span>)) </span><span style="color:#a7adba;">// =&gt; 5
</span></code></pre>
<pre data-lang="js" style="background-color:#eff1f5;color:#4f5b66;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#a7adba;">//module-a.js
</span><span style="color:#b48ead;">const </span><span style="color:#8fa1b3;">add </span><span>= (</span><span style="color:#bf616a;">a</span><span>, </span><span style="color:#bf616a;">b</span><span>) </span><span style="color:#b48ead;">=&gt; </span><span>{
</span><span>  </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">a </span><span>+ </span><span style="color:#bf616a;">b
</span><span>}
</span><span>
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">PI </span><span>= </span><span style="color:#d08770;">3.14
</span><span>
</span><span style="color:#b48ead;">export </span><span>{
</span><span>  </span><span style="color:#bf616a;">add</span><span>,
</span><span>  </span><span style="color:#bf616a;">PI
</span><span>}
</span></code></pre>
<p>now you can run the deno with the following arguments:</p>
<pre data-lang="bash" style="background-color:#eff1f5;color:#4f5b66;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">deno</span><span> run</span><span style="color:#bf616a;"> --allow-all --watch</span><span> app.js
</span></code></pre>
<p>in fact <code>allow-all</code> is not required but it is nice to have it while you are in development mode as it gives deno full permissions (e.g network, file, ...)</p>

</div>

</div>


    </div>
  </section>
</body>

</html>
